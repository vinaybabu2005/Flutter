Question 16: Develop a Flutter application that includes a TextFormField for user input. The data entered into the TextFormField should be persistently stored in local storage. When the user reopens the app, the previously entered text should be displayed in the TextFormField. 

source code:
import 'package:flutter/material.dart';
import 'package:shared_preferences/shared_preferences.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Persistent TextFormField',
      home: PersistentTextFormFieldPage(),
    );
  }
}

class PersistentTextFormFieldPage extends StatefulWidget {
  @override
  State<PersistentTextFormFieldPage> createState() => _PersistentTextFormFieldPageState();
}

class _PersistentTextFormFieldPageState extends State<PersistentTextFormFieldPage> {
  final TextEditingController _controller = TextEditingController();
  final String _storageKey = 'userInput';

  @override
  void initState() {
    super.initState();
    _loadSavedText();
  }

  // Load saved text from SharedPreferences
  Future<void> _loadSavedText() async {
    final prefs = await SharedPreferences.getInstance();
    final savedText = prefs.getString(_storageKey) ?? '';
    _controller.text = savedText;
  }

  // Save text to SharedPreferences
  Future<void> _saveText(String text) async {
    final prefs = await SharedPreferences.getInstance();
    await prefs.setString(_storageKey, text);
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Persistent TextFormField')),
      body: Padding(
        padding: const EdgeInsets.all(16.0),
        child: Column(
          children: [
            TextFormField(
              controller: _controller,
              decoration: const InputDecoration(
                labelText: 'Enter some text',
                border: OutlineInputBorder(),
              ),
              onChanged: (value) {
                _saveText(value); // Save text on every change
              },
            ),
            const SizedBox(height: 20),
            ElevatedButton(
              onPressed: () {
                _saveText(_controller.text);
                ScaffoldMessenger.of(context).showSnackBar(
                  const SnackBar(content: Text('Text saved!')),
                );
              },
              child: const Text('Save Text'),
            ),
          ],
        ),
      ),
    );
  }
}
